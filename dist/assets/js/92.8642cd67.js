(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{537:function(t,s,e){"use strict";e.r(s);var v=e(24),a=Object(v.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"升级指南"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#升级指南"}},[t._v("#")]),t._v(" 升级指南")]),t._v(" "),s("p",[t._v("本专题不是每次更新版本的时候都会写入内容，只有某些需要特殊留意和处理的版本升级时，才会在这里写入相关的升级指导，如果您想看看uView近来\n都有哪些升级记录，请移步："),s("RouterLink",{attrs:{to:"/components/changelog.html"}},[t._v("更新日志")])],1),t._v(" "),s("demo-model",{attrs:{url:"/"}}),t._v(" "),s("h3",{attrs:{id:"_1-5-8升级指导-2020-08-03"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-8升级指导-2020-08-03"}},[t._v("#")]),t._v(" 1.5.8升级指导(2020-08-03)")]),t._v(" "),s("p",[t._v("由于"),s("code",[t._v("1.5.6")]),t._v("版本新增了"),s("RouterLink",{attrs:{to:"/js/fastUse.html"}},[t._v("this.$u.sys")]),t._v("和"),s("RouterLink",{attrs:{to:"/js/fastUse.html"}},[t._v("this.$u.os")]),t._v("属性，因为属性是初始化时执行一次，导致获取首页和\n内页通过"),s("code",[t._v("this.$u.sys")]),t._v("获取"),s("code",[t._v("windowHeight")]),t._v("高度可能不准确的问题，详见"),s("RouterLink",{attrs:{to:"/components/feature.html#全局赋值设备信息的陷阱"}},[t._v("全局赋值设备信息的陷阱")]),t._v("。"),s("br"),t._v("\n因此，我们在"),s("code",[t._v("1.5.8")]),t._v("版本中，将二者修改为方法的形式，简而言之，是需要后面加上括号，修改后为如下用法：")],1),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$u"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sys")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$u"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("os")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n")])])]),s("p",[t._v("这意味着，如果您使用了"),s("code",[t._v("this.$u.sys")]),t._v("和"),s("code",[t._v("this.$u.os")]),t._v("必须要将其修改为"),s("code",[t._v("this.$u.sys()")]),t._v("和"),s("code",[t._v("this.$u.os()")]),t._v("才行。")]),t._v(" "),s("h3",{attrs:{id:"_1-5-4升级指导-2020-07-21"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-4升级指导-2020-07-21"}},[t._v("#")]),t._v(" 1.5.4升级指导(2020-07-21)")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("重要说明")]),t._v(" "),s("p",[t._v("本次升级主要针对支付宝小程序，需要项目开启支付宝小程序的"),s("a",{attrs:{href:"https://uniapp.dcloud.io/collocation/manifest?id=mp-alipay",target:"_blank",rel:"noopener noreferrer"}},[t._v("component2"),s("OutboundLink")],1),t._v("模式(默认关闭)，做法："),s("br"),t._v("\n在项目根目录"),s("code",[t._v("manifest.json")]),t._v("中新增"),s("code",[t._v("mp-alipay")]),t._v("属性节点，设置"),s("code",[t._v("component2")]),t._v("值为"),s("code",[t._v("true")]),t._v("：")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[t._v("......\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"mp-alipay"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"component2"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n......\n")])])])]),t._v(" "),s("ul",[s("li",[t._v("本次升级主要针对支付宝小程序的兼容，uView目前已全面实现对支付宝小程序的兼容，前提是需要开启支付宝特有的"),s("code",[t._v("component2")]),t._v("模式，才能实现一些新特性和支持。")]),t._v(" "),s("li",[t._v("本次升级中，由于table表格组件的单元格合并模式兼容性不好，且实现方式较为复杂，不利于该组件日后的升级和扩展，故在"),s("code",[t._v("1.5.4")]),t._v("版本废弃了table的单元格合并模式，\n如果您没有使用table的单元格合并模式，则无需理会，如果使用了可以按如下方法处理：")])]),t._v(" "),s("ol",[s("li",[t._v("拷贝一份uView原来的table组件，单独引入：到"),s("code",[t._v("/uview-ui/components")]),t._v("中把"),s("code",[t._v("u-table")]),t._v("、"),s("code",[t._v("u-th")]),t._v("、"),s("code",[t._v("u-tr")]),t._v("、"),s("code",[t._v("u-td")]),t._v("拷贝到其他目录，另起别名使用")]),t._v(" "),s("li",[t._v("稍微修改组件用法，使用正常的table写法，放弃单元格合并模式")])]),t._v(" "),s("br"),t._v(" "),s("br"),t._v(" "),s("h3",{attrs:{id:"_1-2-8升级指导-2020-05-22"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-8升级指导-2020-05-22"}},[t._v("#")]),t._v(" 1.2.8升级指导(2020-05-22)")]),t._v(" "),s("p",[t._v("本次升级，对"),s("code",[t._v("Waterfall")]),t._v("瀑布流组件进行升级，新增了可以清空和移除瀑布流列表数据的组件内部方法，需要通过"),s("code",[t._v("ref")]),t._v("调用，因为组件内部无法直接修改父组件的数据，\n所以需要您手动将原来的"),s("code",[t._v("flow-list")]),t._v("参数改为"),s("code",[t._v("v-model")]),t._v("双向绑定父组件的数据，内部才可以修改父组件的瀑布流数组数据。")]),t._v(" "),s("br"),t._v(" "),s("br"),t._v(" "),s("h3",{attrs:{id:"_1-1-9升级指导-2020-05-06"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-9升级指导-2020-05-06"}},[t._v("#")]),t._v(" 1.1.9升级指导(2020-05-06)")]),t._v(" "),s("p",[t._v("本次升级，对swipeAction组件进行了修改，可以配置多个按钮，原本通过"),s("code",[t._v("btn-text")]),t._v("和"),s("code",[t._v("btn-bg-color")]),t._v("配置按钮的文字和背景颜色，本次升级，加入"),s("code",[t._v("options")]),t._v("\n参数(数组)，可以配置多个按钮，详见"),s("RouterLink",{attrs:{to:"/components/swipeAction.html"}},[t._v("SwipeAction 滑动操作")]),t._v("的基本说明，另外，点击的回调事件中，返回了两个\n参数，一个为Props传递的"),s("code",[t._v("index")]),t._v("参数，另一个"),s("code",[t._v("options")]),t._v("按钮参数的索引。")],1),t._v(" "),s("br"),t._v(" "),s("br"),t._v(" "),s("h3",{attrs:{id:"_1-1-7升级指导-2020-05-05"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-7升级指导-2020-05-05"}},[t._v("#")]),t._v(" 1.1.7升级指导(2020-05-05)")]),t._v(" "),s("p",[t._v("本次升级，迎来了uView的一个跨越发展，uView正式支持npm方式安装，借助此方式，您不用每次都下载覆盖升级，仅执行"),s("code",[t._v("npm update uview-ui")]),t._v("即可，\n由于uView在npm的包名为"),s("code",[t._v("uview-ui")]),t._v("，引入时需写上"),s("code",[t._v('import uView from "uview-ui"')]),t._v("，旧版中下载方式安装时uView的文件夹为"),s("code",[t._v("uview")]),t._v("，为了规范和统一，\n在此"),s("code",[t._v("1.1.7")]),t._v("版本后，uView将以前根目录的"),s("code",[t._v("uview")]),t._v("文件夹，改名为"),s("code",[t._v("uview-ui")]),t._v("，其他保持不变。")]),t._v(" "),s("p",[t._v("对此您有两个选择：")]),t._v(" "),s("ol",[s("li",[t._v("uView下载解压后得到"),s("code",[t._v("uview-ui")]),t._v("文件夹，您可以将其改名为"),s("code",[t._v("uview")]),t._v("，从而覆盖原有的同名库(如果这不是您第一次下载的话)，这样您无需在"),s("code",[t._v("pages.json")]),t._v("、"),s("code",[t._v("main.js")]),t._v("、"),s("code",[t._v("uni.scss")]),t._v("、"),s("code",[t._v("App.vue")]),t._v("做出路径名称的变更(但是我们不推荐这样做)")]),t._v(" "),s("li",[t._v("如果您是在进行下载方式的升级，删掉(或备份)原来的"),s("code",[t._v("uview")]),t._v("文件夹，将"),s("code",[t._v("uview-ui")]),t._v("文件夹放到根目录，然后根据"),s("RouterLink",{attrs:{to:"/components/downloadSetting.html"}},[t._v("下载安装方式配置")]),t._v("说明对"),s("code",[t._v("pages.json")]),t._v("、"),s("code",[t._v("main.js")]),t._v("、"),s("code",[t._v("uni.scss")]),t._v("、"),s("code",[t._v("App.vue")]),t._v("做出细微修改。(推荐此方式，一劳永逸)")],1)]),t._v(" "),s("br"),t._v(" "),s("br"),t._v(" "),s("h3",{attrs:{id:"_1-1-4升级指导-2020-04-29"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-4升级指导-2020-04-29"}},[t._v("#")]),t._v(" 1.1.4升级指导(2020-04-29)")]),t._v(" "),s("p",[t._v("由于本次更新，加入基础类"),s("RouterLink",{attrs:{to:"/components/common.html"}},[t._v("内置样式")]),t._v("，需要作出一些调整(修改两行代码)，原因如下：")],1),t._v(" "),s("ol",[s("li",[t._v("内置样式如果放在uni.scss文件中，在微信小程序上，由于编译机制的问题，会同时被打包\n到全局样式文件和单独的每个页面样式文件中，可能造成分包、整包变大而无法预览或者发布。故uView对此样式进行了分拆，将基础样式类放到uView库的"),s("code",[t._v("index.scss")]),t._v("中，由于目前uni-app的V3版本不支持在main.js中引入，\n故需要在App.vue中引入，不会导致被打包到每个单独的页面样式文件中。")]),t._v(" "),s("li",[t._v("由于uni-app的机制，对于SCSS的变量，只能在uni.scss中引入才生效，故uView将主题样式变量相关的部分，放到了uView库的"),s("code",[t._v("theme.scss")]),t._v("文件中。")])]),t._v(" "),s("p",[t._v("具体操作如下：")]),t._v(" "),s("ul",[s("li",[t._v("在"),s("code",[t._v("App.vue")]),t._v("中"),s("strong",[t._v("首行")]),t._v("的位置，增加如下一行"),s("code",[t._v('import "@/uview-ui/index.scss"')]),t._v("：")])]),t._v(" "),s("div",{staticClass:"custom-block danger"},[s("p",{staticClass:"custom-block-title"},[t._v("注意：")]),t._v(" "),s("ol",[s("li",[t._v("必须要将标签加入"),s("code",[t._v('lang="scss"')]),t._v("属性以支持SCSS，否则会出错！")]),t._v(" "),s("li",[t._v("请将将引入的代码，写在"),s("code",[t._v("style")]),t._v("标签的首行。")])])]),t._v(" "),s("div",{staticClass:"language-css extra-class"},[s("pre",{pre:!0,attrs:{class:"language-css"}},[s("code",[t._v("<style lang="),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"scss"')]),t._v(">\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/* 注意要写在第一行，同时给style标签加入lang="scss"属性 */')]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token atrule"}},[s("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@/uview-ui/index.scss"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")])]),t._v("\n\t\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* ......其他的样式 */")]),t._v("\n</style>\n")])])]),s("ul",[s("li",[t._v("在项目根目录的"),s("code",[t._v("uni.scss")]),t._v("中，删除原来的"),s("code",[t._v("@import '@/uview-ui/theme.scss';")]),t._v("一行，改成如下：")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 删除原来的这一行")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @import '@/uview-ui/index.scss';")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 加入这一行")]),t._v("\n@"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/uview-ui/theme.scss'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])],1)}),[],!1,null,null,null);s.default=a.exports}}]);